<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ch5.10: const and Pointers - C++ Tutorial with fast_io</title>
  <link rel="stylesheet" href="/style.css">
  <link rel="manifest" href="/manifest.json">
  <link rel="icon" type="image/webp" href="/icons/logo.webp">
</head>
<body>
  <main>
    <h1>Ch5.10: const and Pointers</h1>

    <section>
      <h2>Overview</h2>
      <p>
        Pointers and <code>const</code> interact in three distinct ways. Understanding
        these combinations is essential for writing correct and safe C++ code.
      </p>

      <p>
        In this chapter, you will learn:
      </p>

      <ul>
        <li>the rule: <strong><code>const</code> applies to the left. Full stop.</strong></li>
        <li>how to read <code>T const*</code>, <code>T* const</code>, and <code>T const* const</code></li>
        <li>the difference between “pointer to const” and “const pointer”</li>
        <li>why <strong><code>char const*</code></strong> is the correct type for C‑style strings</li>
        <li>how const interacts with pointer arithmetic</li>
      </ul>
    </section>

    <section>
      <h2>1. The rule: const applies to the left. Full stop.</h2>
      <p>
        This rule was introduced in Ch2.8 and is the foundation for reading all const
        pointer types:
      </p>

      <p class="important">
        <strong>If there is a type to the left of <code>const</code>, it applies to that type.
        If not, it applies to the right.</strong>
      </p>

      <p>Examples:</p>

<pre><code class="language-cpp">
int const x = 5;   // const applies to int
const int y = 6;   // same meaning, but less clear
</code></pre>

      <p>
        For pointers, this rule becomes extremely important.
      </p>
    </section>

    <section>
      <h2>2. Pointer to const: <code>T const*</code></h2>
      <p>
        This means “pointer to a <strong>const T</strong>”.  
        The pointer may change, but the object it points to may not.
      </p>

<pre><code class="language-cpp">
int value{10};

int const *p = ::std::addressof(value);   // pointer to const int
</code></pre>

      <p>Allowed:</p>

<pre><code class="language-cpp">
p = ::std::addressof(value);   // ✔ pointer may change
</code></pre>

      <p>Not allowed:</p>

<pre><code class="language-cpp">
// *p = 20;   // ❌ cannot modify through pointer
</code></pre>

      <p>
        This is the correct type for pointers to C‑style strings:
      </p>

<pre><code class="language-cpp">
char const *s = "Hello";   // correct
</code></pre>

      <p>
        Always write <strong><code>T const*</code></strong>, not <code>const T*</code>.
      </p>
    </section>

    <section>
      <h2>3. Const pointer: <code>T* const</code></h2>
      <p>
        This means “<strong>const pointer</strong> to T”.  
        The pointer may not change, but the object it points to may.
      </p>

<pre><code class="language-cpp">
int value{10};

int * const p = ::std::addressof(value);   // const pointer
</code></pre>

      <p>Allowed:</p>

<pre><code class="language-cpp">
*p = 20;   // ✔ can modify the pointee
</code></pre>

      <p>Not allowed:</p>

<pre><code class="language-cpp">
// p = nullptr;   // ❌ pointer itself is const
</code></pre>
    </section>

    <section>
      <h2>4. Const pointer to const: <code>T const* const</code></h2>
      <p>
        This means:
      </p>

      <ul>
        <li>the pointer cannot change</li>
        <li>the object pointed to cannot change</li>
      </ul>

<pre><code class="language-cpp">
int value{10};

int const * const p = ::std::addressof(value);
</code></pre>

      <p>Not allowed:</p>

<pre><code class="language-cpp">
// p = nullptr;   // ❌ pointer is const
// *p = 20;       // ❌ pointee is const
</code></pre>
    </section>

    <section>
      <h2>5. Why <code>char const*</code> is the correct type for C‑style strings</h2>
      <p>
        A string literal is a <strong>constant C‑style array</strong>.  
        It cannot be modified.
      </p>

<pre><code class="language-cpp">
char const *s = "Hello";   // correct
</code></pre>

      <p>
        Writing <code>char const*</code> makes the constness explicit and follows the rule:
      </p>

      <p class="important">
        <strong><code>const</code> applies to the left. Full stop.</strong>
      </p>

      <p>
        Writing <code>const char*</code> is allowed but less consistent with the rule.
      </p>
    </section>

    <section>
      <h2>6. Const and pointer arithmetic</h2>
      <p>
        Const does not affect pointer arithmetic.  
        It only affects what may be modified.
      </p>

<pre><code class="language-cpp">
int a[3]{1,2,3};

int const *p = a;   // pointer to const int
p = p + 1;          // ✔ pointer may move
</code></pre>

      <p>
        But you still cannot modify the pointee:
      </p>

<pre><code class="language-cpp">
// *p = 10;   // ❌ not allowed
</code></pre>

      <p>
        For a const pointer:
      </p>

<pre><code class="language-cpp">
int * const q = a;   // const pointer
// q = q + 1;        // ❌ cannot move pointer
*q = 10;             // ✔ can modify pointee
</code></pre>
    </section>

    <section>
      <h2>7. Summary table</h2>

      <table>
        <thead>
          <tr>
            <th>Syntax</th>
            <th>Meaning</th>
            <th>Pointer can change?</th>
            <th>Pointee can change?</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>T const*</code></td>
            <td>pointer to const T</td>
            <td>✔ yes</td>
            <td>❌ no</td>
          </tr>
          <tr>
            <td><code>T* const</code></td>
            <td>const pointer to T</td>
            <td>❌ no</td>
            <td>✔ yes</td>
          </tr>
          <tr>
            <td><code>T const* const</code></td>
            <td>const pointer to const T</td>
            <td>❌ no</td>
            <td>❌ no</td>
          </tr>
        </tbody>
      </table>
    </section>

    <section>
      <h2>Key takeaways</h2>
      <ul>
        <li><strong><code>const</code> applies to the left. Full stop.</strong></li>
        <li>Always write <strong><code>T const*</code></strong>, not <code>const T*</code>.</li>
        <li><code>T const*</code> means “pointer to const T”.</li>
        <li><code>T* const</code> means “const pointer to T”.</li>
        <li><code>T const* const</code> means “const pointer to const T”.</li>
        <li><code>char const*</code> is the correct type for C‑style strings.</li>
        <li>Const does not affect pointer arithmetic.</li>
        <li>Const only affects what may be modified.</li>
      </ul>
    </section>

    <script src="/sw-register.js"></script>
    <div class="page-navigation">
      <a href="/docs/05.pointerscarray/09.multidim/" class="prev-button">← Ch5.9: Multi-dimensional C-style Arrays</a>
      <a href="/" class="main-button">↑ Main Page</a>
      <a href="/docs/05.pointerscarray/11.voidpointer/" class="next-button">Ch5.11: void* →</a>
    </div>
  </main>
</body>
</html>
